{#
SPDX-License-Identifier: Apache-2.0
SPDX-FileCopyrightText: 2025 The Linux Foundation
#}

{#- Base Markdown template for repository analysis reports -#}
{#- Phase 8: Renderer Modernization - Modular Component-Based Design -#}
{#-
    This template orchestrates the complete report by including modular sections.
    Each section is self-contained and can be enabled/disabled via configuration.

    Context required:
        - project: Project metadata (name, generated_at, schema_version)
        - summary: Summary statistics
        - repositories: Repository data
        - contributors: Contributor data
        - organizations: Organization data
        - features: Feature detection data
        - workflows: CI/CD job data
        - orphaned_jobs: Orphaned job data
        - time_windows: Time window data
        - config: Configuration options
-#}

{#- Report Header -#}
# {{ project.name }}

**Generated:** {{ project.generated_at_formatted }}
**Schema Version:** {{ project.schema_version }}

---

{#- Summary Section -#}
{% include 'markdown/sections/summary.md.j2' %}

{#- Repositories Section -#}
{% include 'markdown/sections/repositories.md.j2' %}

{#- Contributors Section -#}
{% include 'markdown/sections/contributors.md.j2' %}

{#- Organizations Section -#}
{% include 'markdown/sections/organizations.md.j2' %}

{#- Features Section -#}
{% include 'markdown/sections/features.md.j2' %}

{#- Workflows Section -#}
{% include 'markdown/sections/workflows.md.j2' %}

{#- Orphaned Jobs Section -#}
{% include 'markdown/sections/orphaned_jobs.md.j2' %}

{#- Time Windows Section -#}
{#- TODO: Create time_windows.md.j2 section template -#}
{% if time_windows is defined and time_windows is iterable and time_windows|length > 0 %}
## Time Windows

{% for window in time_windows %}
### {{ window.name }} ({{ window.days }} days)

**Date Range:** {{ window.start_date }} to {{ window.end_date }}

| Metric | Value |
|--------|-------|
| Commits | {{ window.commits | format_number }} |
| Contributors | {{ window.contributors }} |
| Lines Added | {{ window.lines_added | format_number }} |
| Lines Removed | {{ window.lines_removed | format_number }} |
| Net Lines | {{ window.net_lines | format_number }} |

{% endfor %}

---
{% endif %}

---

{#- Report Footer -#}
*Report generated by Repository Reporting System*
